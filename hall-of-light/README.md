Hall of Light
----------------
> 《黄帝内经》竖排版。内容根据1978年人民卫生出版社的《黄帝内经素问》（梅花版）进行校对。

《黄帝内经》又名《明堂》(hall of light)又名《太素》。包含了阴阳五行理论、疾病诊断与治疗的核心原则、及针灸的详细方法说明。是中医的经典书籍。也是中国古代现存最早的医学典籍。

# 项目缘起
本人是一中医小白+中医爱好者，但看经典也只看过内经。像我这样的在网络上自学中医的人不少，但是我发现中医的最高经典，网上居然很缺乏【可靠的】校对版（当然了中医历史几千年，各种传抄产生的错误也是在所难免，不过我这里说的不是“古人的错”，而是“现在人的错误”，这些错误包括一些明显的错别字，丢字，多字等问题），这不免让我看着觉得很心虚。不过还好就是手头有舅舅借我的一本《黄帝内经·素问》（1978年人民卫生出版社），不过这个书早就绝版了，现在基本上没有了，好在人卫后来又翻版重印了（https://item.jd.com/10971891.html https://item.jd.com/10973034.html ）。而且一个很要命的问题是现在的翻版用的都是简化字（人卫也有古本的影印版），这就带来一个很大的问题，因为汉字简化的时候经常会有多个未简化汉字对一个简化汉字的情况（【百度百科：繁体字】……第三种是用同音字或近音字取代，比如「稻榖」的「榖」和「山谷」的「谷」，本来是两个字，而为了省略笔画，就统一用笔画少的“谷”替代了。）导致同一个字的意思越来越多（相当于是hashmap的key算出的hash起了冲突，多个value都被放进了一个list里）这也是中医院学生需要学“医古文”这门课的原因之一（另一个原因是简化后的汉字很多时候丢失了【望文生义】的特点。还有一个原因是有很多医学专用字）。这也导致记忆和理解比较困难（人脑对于视觉符号的识别能力很高（相当于hash函数可用的值域非常大），而像我这样记性不太好（相当于list只能存很少，一个字一个意思记住还差不多，一个字两三个意思就有点费劲了）的人，如果能充分利用这个优势。学习会方便很多）。另外我们也不需要手写，所以用简化字的主要原因并不存在。另一个主要考虑是希望排出的文档更有古风~（梅花版里也有一些是未完全简化的字。）

因此我希望能有一个较为完善的版本，至少要把78年这本书的电子版留下（这纸放时间越长质量就越差了）。再说内容方面应该是没有版权的。另外是希望这个项目能长期（也许是20年或更长？）不断接受反馈，尽可能的减少人为产生的疏漏（这也算是开源的一种吧，毕竟现在很多文档你看到错字都不知道找谁去）。

# 项目目标
目前打算做这么几个版本：
1. 竖排无标点，适合读诵
2. 竖排有标点，适合初学读诵
3. 竖排有割注无标点，适合收藏
4. 竖排有割注有标点，适合普通阅读及学习
5. 横排有标点，适合初学读诵
6. 横排有割注有标点，适合普通阅读及学习
7. 口袋书版本等

## 主要工作
包括以下几部分：
1. 内容校对（包括繁简对照与转换）
2. 标点校对（以梅花版的句逗为准）
3. 割注输入

### 内容校对进度
素问：进行中，已完成前十篇。
灵枢：手头无准确纸质资料，尚未想好该怎么办~

### 标点校对进度
尚未开始

### 割注输入进度
尚未开始

# 技术说明

## 选型
本项目使用latex制作。主要是考虑到以下原因：
1. 不依赖微软Office套件。免于Office的版本问题。
2. 源代码（内容）为纯文本，便于在网页上查看与编辑。
3. 生成PDF的参数（页面大小等）容易调整。支持嵌入字体。
4. 内容无须随形式改变。

## 技术难点
这个项目主要有两个技术难点：一是中文竖排（直排|直书），二是非常见字的输入和显示。

### 中文竖排

目前网上能找到几种方案：

1. 用uplatex，pTex是一个日文的排版引擎，u表示unicode。自带竖排效果，但是只能生成DVI，需要再用dvipdfmx转成PDF。ctex（在Windows下）默认支持6种字体，详见：https://github.com/CTeX-org/ctex-kit/issues/159
2. 直接用xelatex的垂直模式：https://tex.stackexchange.com/q/147840 。坏处是中文西文的baseline对不齐，需要自己对。而且页码的位置可能比较费事情~发现转90度其实很简单的。。。。好处就是各种xelatex的包都可以用（有些不能在垂直模式或者landscape模式下用），比如gezhu（割注）包，这个要求底层使用zhspacing包。但是效果看起来还不错，支持xelatex：【http://www.latexstudio.net/archives/536 】。
3. 台湾的一个方案【中文直书】http://code.google.com/p/chinese-vertical-writing-style/ ，但是需要生成后手动把PDF转90度，且不支持割注。这个好处是解决了很多问题（列表啊什么的），据说只能用miktex（win平台），用的是CJK环境，很古老了~弃疗吧

本项目对于中文直书技术的探索会反馈给大众：[如何使用 LaTeX 输出竖版排版的文章或书籍？ - 宋景和的回答 - 知乎](https://www.zhihu.com/question/20544732/answer/376414732)
当然本人在latex方面确实是个小白，所以欢迎各位大神的支持。

### 非常见字的显示
首先，大部分的汉字都有Unicode编码，只不过很多字典没有收录，比较全的是【汉典】，台湾的这个也不错（需翻墻）：http://www.cns11643.gov.tw/AIDB/welcome.do
里面可以按照各种方式查询字体，一般我用部首检索~

然后在这个网址上输入查到的unicode编码，即可得到对应的字：http://www.qqxiuzi.cn/bianma/zifuji.php

很多字體也沒有收錄非常見字，所以只好一個個測試，目前正文的主要字體是`Adobe Song Std`，章節標題用的是`Adobe Heiti Std`，小標題用的是`Adobe Fangsong Std`。部分非常見字使用了`AR PL UMing CN`（文鼎明體）、`Simsun`（宋體）、`NSimsun`（新宋體）以及`方正宋體-超大字符集.TTF`

### 編譯項目
需要從附件中下載幾個對應的字體。

## 项目附件说明
项目用到的字体可以在項目附件中下载到。

gezhu包及demo见附件。

uplatex的一个demo见附件。

## 加入我们
如果你对此工作感兴趣，并且手头有一本78年出版的《黄帝内经素问》（没有的话可以搜索孔夫子旧书网），欢迎联系本人![邮箱](https://gitee.com/uploads/images/2018/0117/103727_b44c4794_19536.png "t2p2018011710345788562.png")

# 参考资料
- 【汉典古籍】中的《黄帝内经》 ：http://gj.zdic.net/archive.php?aid=1273
- 【中国哲学书电子化计划】中的《黄帝内经》：https://ctext.org/huangdi-neijing/zh
- Unicode编码查字：http://www.qqxiuzi.cn/bianma/zifuji.php
- ctex项目：https://github.com/CTeX-org/ctex-kit
- [如何使用 LaTeX 输出竖版排版的文章或书籍？ - 宋景和的回答 - 知乎](https://www.zhihu.com/question/20544732/answer/376414732)